<div class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="bg-primary text-white p-6">
        <h1 class="text-2xl font-bold">Minha Conta</h1>
        <p class="text-sm opacity-80">Gerencie suas informações pessoais</p>
      </div>
  
      <div *ngIf="isLoading" class="p-6 flex justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
      </div>
  
      <div *ngIf="errorMessage" class="p-4 bg-red-100 text-red-700 border border-red-200 rounded mx-6 my-4">
        {{ errorMessage }}
      </div>
  
      <div *ngIf="submitSuccess" class="p-4 bg-green-100 text-green-700 border border-green-200 rounded mx-6 my-4">
        Perfil atualizado com sucesso!
      </div>
  
      <div *ngIf="!isLoading && client" class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold text-gray-800">Informações Pessoais</h2>
          <button 
            (click)="toggleEdit()" 
            class="px-4 py-2 rounded-md text-sm font-medium"
            [ngClass]="isEditing ? 'bg-gray-200 text-gray-700' : 'bg-primary text-white'"
          >
            {{ isEditing ? 'Cancelar' : 'Editar' }}
          </button>
        </div>
  
        <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Informações básicas -->
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
                <input 
                  type="text" 
                  formControlName="name" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700 bg-gray-100"
                  readonly
                >
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <input 
                  type="email" 
                  formControlName="email" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700 bg-gray-100"
                  readonly
                >
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                <input 
                  type="tel" 
                  formControlName="phone" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite seu telefone"
                >
                <div *ngIf="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched" class="text-red-500 text-xs mt-1">
                  Formato inválido. Use apenas números (10-11 dígitos).
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">CPF</label>
                <input 
                  type="text" 
                  formControlName="cpf" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite seu CPF"
                >
                <div *ngIf="profileForm.get('cpf')?.invalid && profileForm.get('cpf')?.touched" class="text-red-500 text-xs mt-1">
                  CPF inválido. Use apenas números (11 dígitos).
                </div>
              </div>
            </div>
            
            <!-- Endereço -->
            <div formGroupName="address" class="space-y-4">
              <h3 class="text-lg font-medium text-gray-800 mb-2">Endereço</h3>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Rua</label>
                <input 
                  type="text" 
                  formControlName="street" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite sua rua"
                >
                <div *ngIf="addressForm.get('street')?.invalid && addressForm.get('street')?.touched" class="text-red-500 text-xs mt-1">
                  Rua é obrigatória.
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Número</label>
                <input 
                  type="text" 
                  formControlName="number" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite o número"
                >
                <div *ngIf="addressForm.get('number')?.invalid && addressForm.get('number')?.touched" class="text-red-500 text-xs mt-1">
                  Número é obrigatório.
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Bairro</label>
                <input 
                  type="text" 
                  formControlName="neighborhood" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite seu bairro"
                >
                <div *ngIf="addressForm.get('neighborhood')?.invalid && addressForm.get('neighborhood')?.touched" class="text-red-500 text-xs mt-1">
                  Bairro é obrigatório.
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
                <input 
                  type="text" 
                  formControlName="state" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md text-gray-700"
                  [ngClass]="{'bg-gray-100': !isEditing}"
                  [readonly]="!isEditing"
                  placeholder="Digite seu estado"
                >
                <div *ngIf="addressForm.get('state')?.invalid && addressForm.get('state')?.touched" class="text-red-500 text-xs mt-1">
                  Estado é obrigatório.
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-8 flex justify-end">
            <button 
              type="submit" 
              class="px-6 py-2 bg-primary text-white rounded-md font-medium hover:bg-primary-dark transition-colors"
              [disabled]="!isEditing || profileForm.invalid"
              [ngClass]="{'opacity-50 cursor-not-allowed': !isEditing || profileForm.invalid}"
            >
              Salvar Alterações
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  